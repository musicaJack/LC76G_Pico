# 贡献指南

感谢您对LC76G_Pico项目的关注！本文档提供了为项目做出贡献的详细指南。我们欢迎各种形式的贡献，包括代码改进、文档更新、问题报告和功能请求。

## 目录

- [行为准则](#行为准则)
- [如何贡献](#如何贡献)
  - [报告问题](#报告问题)
  - [功能请求](#功能请求)
  - [代码贡献](#代码贡献)
- [开发流程](#开发流程)
  - [分支管理](#分支管理)
  - [提交消息规范](#提交消息规范)
  - [代码审查](#代码审查)
- [开发环境](#开发环境)
- [编码规范](#编码规范)
  - [C/C++代码规范](#cc代码规范)
  - [Python代码规范](#python代码规范)
  - [文档规范](#文档规范)
- [测试准则](#测试准则)
- [文档编写](#文档编写)
- [版本发布流程](#版本发布流程)
- [社区沟通](#社区沟通)

## 行为准则

参与本项目的所有贡献者都应遵循我们的行为准则：

- 尊重所有参与者，不论经验水平、性别、性取向、残疾状况、外表、种族或宗教信仰
- 使用包容性语言
- 接受建设性批评
- 关注项目和社区的最佳利益
- 对其他社区成员表示同理心

不可接受的行为包括：

- 使用性化语言或图像以及不受欢迎的性关注
- 挑衅、侮辱性评论和人身攻击
- 公开或私下骚扰
- 未经明确许可发布他人私人信息
- 其他在专业环境中被合理认为不适当的行为

## 如何贡献

### 报告问题

如果您发现错误或问题，请通过GitHub Issues系统报告。创建问题时，请：

1. 使用清晰的标题描述问题
2. 详细描述重现问题的步骤
3. 说明预期行为和实际行为
4. 提供系统信息（操作系统、硬件设备等）
5. 如可能，附上截图或日志

### 功能请求

如果您想请求新功能，请通过GitHub Issues提交功能请求。请：

1. 详细描述您希望的功能
2. 解释为什么此功能对项目有价值
3. 提供实现思路（如果有）

### 代码贡献

贡献代码的基本流程：

1. 在GitHub上Fork项目仓库
2. 克隆您的Fork到本地
   ```bash
   git clone https://github.com/您的用户名/LC76G_Pico.git
   cd LC76G_Pico
   ```
3. 添加上游仓库
   ```bash
   git remote add upstream https://github.com/原始组织/LC76G_Pico.git
   ```
4. 创建新分支
   ```bash
   git checkout -b feature/your-feature-name
   ```
5. 进行更改并提交
   ```bash
   git add .
   git commit -m "feat: 添加了新功能"
   ```
6. 将更改推送到您的Fork
   ```bash
   git push origin feature/your-feature-name
   ```
7. 通过GitHub提交Pull Request

## 开发流程

### 分支管理

项目使用以下分支策略：

- `main`: 稳定分支，用于发布
- `develop`: 开发分支，最新功能集成于此
- `feature/*`: 功能分支，用于开发新功能
- `bugfix/*`: 错误修复分支
- `release/*`: 发布准备分支
- `hotfix/*`: 紧急修复分支

### 提交消息规范

我们使用[约定式提交](https://www.conventionalcommits.org/)规范来格式化提交消息：

```
<类型>[可选范围]: <描述>

[可选正文]

[可选脚注]
```

类型包括：
- `feat`: 新功能
- `fix`: 错误修复
- `docs`: 文档更改
- `style`: 不影响代码含义的更改（空格、格式化等）
- `refactor`: 既不修复错误也不添加功能的代码更改
- `perf`: 提高性能的代码更改
- `test`: 添加或修正测试
- `build`: 影响构建系统或外部依赖的更改
- `ci`: 更改CI配置文件和脚本
- `chore`: 其他不修改src或test文件的更改

示例：
```
feat(gnss): 添加对新型号LC76G2的支持

添加了对新型号LC76G2 GNSS模块的支持，包括：
- 新的I2C通信协议
- 增强的定位性能配置
- 更新相关文档

Closes #123
```

### 代码审查

所有代码贡献都需要通过代码审查流程：

1. 至少一名项目维护者会审查您的代码
2. 可能会要求进行更改
3. 一旦获得批准，项目维护者将合并您的PR

## 开发环境

所有贡献者应按照[开发环境设置](development-setup.md)文档配置其开发环境。确保您的环境符合项目要求，这样可以减少构建和测试问题。

## 编码规范

### C/C++代码规范

我们遵循以下C/C++代码规范：

- 缩进使用4个空格，不使用制表符
- 大括号位于行尾，不单独占一行
- 使用camelCase命名变量和函数
- 使用PascalCase命名结构体和类
- 使用UPPER_CASE命名常量和宏
- 每行不超过100个字符
- 所有函数都应有文档注释
- 头文件使用防卫式宏（include guards）

示例：

```c
/**
 * @brief 解析GNSS数据包
 * @param data 输入数据缓冲区
 * @param length 数据长度
 * @return 成功返回0，失败返回错误代码
 */
int parseGnssPacket(const uint8_t* data, size_t length) {
    if (data == NULL || length == 0) {
        return ERROR_INVALID_PARAMS;
    }
    
    for (size_t i = 0; i < length; i++) {
        // 处理逻辑
    }
    
    return 0;
}
```

### Python代码规范

Python代码应遵循[PEP 8](https://www.python.org/dev/peps/pep-0008/)规范，主要包括：

- 使用4个空格缩进
- 使用snake_case命名变量和函数
- 使用PascalCase命名类
- 使用docstrings记录函数和类

### 文档规范

- 所有文档使用Markdown格式
- 文档应该清晰、简洁
- 代码示例应该可以直接运行
- 图表和图片应有适当的描述
- 保持文档与代码同步更新

## 测试准则

- 所有新功能必须包含相应的测试
- 所有错误修复应包含能防止该错误再次出现的测试
- 测试应该覆盖正常情况和边界情况
- 单元测试应该快速且不依赖外部资源
- 集成测试可以测试与实际硬件的交互

### 如何运行测试

```bash
# 构建并运行单元测试
cd build
cmake -DENABLE_TESTS=ON ..
make
ctest
```

## 文档编写

贡献文档时，请遵循以下准则：

1. 使用简明扼要的语言
2. 提供具体的示例
3. 组织文档结构，使用适当的标题层次
4. 更新目录索引
5. 校对拼写和语法

## 版本发布流程

我们使用[语义化版本](https://semver.org/)规范：

- 主版本号(X.0.0)：不兼容的API更改
- 次版本号(0.X.0)：向后兼容的功能添加
- 修订号(0.0.X)：向后兼容的错误修复

发布流程：

1. 从`develop`分支创建`release/vX.Y.Z`分支
2. 在此分支上进行最终测试和准备
3. 合并到`main`分支并打标签
4. 将发布更改合并回`develop`分支

## 社区沟通

与项目社区保持联系的方式：

- GitHub Issues：技术讨论和问题报告
- GitHub Discussions：一般性讨论和问答
- 邮件列表：重要公告和更长期的讨论
- 社区通话：定期进行的视频会议

---

感谢您的贡献！如果您有任何问题或需要帮助，请随时通过GitHub Issues联系项目维护者。 